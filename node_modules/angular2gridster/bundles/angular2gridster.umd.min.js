!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("angular2gridster",["exports","@angular/core","@angular/common","rxjs","rxjs/operators"],e):e((t=t||self).angular2gridster={},t.ng.core,t.ng.common,t.rxjs,t.rxjs.operators)}(this,(function(t,e,i,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(){return(r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var p=t.length-1;p>=0;p--)(o=t[p])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function p(t,e){return function(i,n){e(i,n,t)}}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}var g=function(t,e){t.style.left=e.x+"px",t.style.top=e.y+"px"},d=function(t){t.style.left="",t.style.top=""},c=function(t,e){var i="translate("+e.x+"px,"+e.y+"px)";t.style.transform=i,t.style.WebkitTransform=i,t.style.MozTransform=i,t.style.msTransform=i,t.style.OTransform=i},m=function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},f=function(t,e){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.left>i.left&&n.right<i.right&&n.top>i.top&&n.bottom<i.bottom},y=function(t,e){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=n.right-n.left,r=n.bottom-n.top;return n.left+o/2>i.left&&n.right-o/2<i.right&&n.top+r/2>i.top&&n.bottom-r/2<i.bottom},v=function(t,e){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return n.right>i.left&&n.bottom>i.top&&n.left<i.right&&n.top<i.bottom},b=function(t,e){var i=e.getBoundingClientRect();return t.pageX>i.left&&t.pageX<i.right&&t.pageY>i.top&&t.pageY<i.bottom},x=function(t){var e=window.getComputedStyle(t);return parseFloat(e.getPropertyValue("height"))+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))},w=function(t,e){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-i.top,left:n.left-i.left}},O=function(t){var e=/(auto|scroll)/,i=function(t,e){return null===t.parentNode?e:i(t.parentNode,e.concat([t]))},n=function(t,e){return getComputedStyle(t,null).getPropertyValue(e)},o=function(t){return e.test(function(t){return n(t,"overflow")+n(t,"overflow-y")+n(t,"overflow-x")}(t))};return function(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var e=i(t.parentNode,[]),n=0;n<e.length;n+=1)if(o(e[n]))return e[n];return document.scrollingElement||document.documentElement}}(t)},E=function(t){for(var e=0;e<t;e++)this.push(null)};E.prototype=[];var P=function(){function t(t,e){this.options=e,this.items=t,this.adjustSizeOfItems(),this.generateGrid()}return t.prototype.toString=function(){var t,e,i,n=this.grid.length,o="\n #|",r="\n --";for(e=0;e<n;e++)o+=" "+this.padNumber(e," "),r+="---";for(o+=r,e=0;e<this.options.lanes;e++)for(o+="\n"+this.padNumber(e," ")+"|",i=0;i<n;i++)o+=" ",o+=(t=this.grid[i][e])?this.padNumber(this.items.indexOf(t),"0"):"--";return o+="\n"},t.prototype.setOption=function(t,e){this.options[t]=e},t.prototype.generateGrid=function(){var t;for(this.resetGrid(),t=0;t<this.items.length;t++)this.markItemPositionToGrid(this.items[t])},t.prototype.resizeGrid=function(t){var e=0;this.options.lanes=t,this.adjustSizeOfItems(),this.sortItemsByPosition(),this.resetGrid();for(var i=0;i<this.items.length;i++){var n=this.items[i],o=this.getItemPosition(n);this.updateItemPosition(n,this.findPositionForItem(n,{x:e,y:0})),e=Math.max(e,o.x)}this.pullItemsToLeft()},t.prototype.findPositionForItem=function(t,e,i){var n,o,r;for(n=e.x;n<this.grid.length;n++)if(void 0!==i){if(r=[n,i],this.itemFitsAtPosition(t,r))return r}else for(o=e.y;o<this.options.lanes;o++)if(r=[n,o],this.itemFitsAtPosition(t,r))return r;var s=this.grid.length,p=0;return void 0!==i&&this.itemFitsAtPosition(t,[s,i])&&(p=i),[s,p]},t.prototype.moveAndResize=function(t,e,i){var n=this.getItemPosition({x:e[0],y:e[1],w:t.w,h:t.h}),o=i.w||t.w,r=i.h||t.h;this.updateItemPosition(t,[n.x,n.y]),this.updateItemSize(t,o,r),this.resolveCollisions(t)},t.prototype.moveItemToPosition=function(t,e){var i=this.getItemPosition({x:e[0],y:e[1],w:t.w,h:t.h});this.updateItemPosition(t,[i.x,i.y]),this.resolveCollisions(t)},t.prototype.resizeItem=function(t,e){var i=e.w||t.w,n=e.h||t.h;this.updateItemSize(t,i,n),this.pullItemsToLeft(t)},t.prototype.getChangedItems=function(t,e){return this.items.map((function(i){var n=[],o={},r=t.find((function(t){return t.$element===i.$element}));if(!r)return{item:i,changes:["x","y","w","h"],isNew:!0};var s=r.getValueX(e);i.getValueX(e)!==s&&(n.push("x"),(s||0===s)&&(o.x=s));var p=r.getValueY(e);return i.getValueY(e)!==p&&(n.push("y"),(p||0===p)&&(o.y=p)),i.getValueW(e)!==r.getValueW(e)&&(n.push("w"),o.w=r.w),i.getValueH(e)!==r.getValueH(e)&&(n.push("h"),o.h=r.h),{item:i,oldValues:o,changes:n,isNew:!1}})).filter((function(t){return t.changes.length}))},t.prototype.resolveCollisions=function(t){this.tryToResolveCollisionsLocally(t)||this.pullItemsToLeft(t),this.options.floating?this.pullItemsToLeft():this.getItemsCollidingWithItem(t).length&&this.pullItemsToLeft()},t.prototype.pushCollidingItems=function(t){var e=this;this.sortItemsByPosition(),this.resetGrid(),this.generateGrid(),this.items.filter((function(i){return!e.isItemFloating(i)&&i!==t})).forEach((function(t){e.tryToResolveCollisionsLocally(t)||e.pullItemsToLeft(t)}))},t.prototype.pullItemsToLeft=function(t){var e=this;if("none"!==this.options.direction){if(this.sortItemsByPosition(),this.resetGrid(),t){var i=this.getItemPosition(t);this.updateItemPosition(t,[i.x,i.y])}this.items.filter((function(e){return!e.dragAndDrop&&e!==t})).forEach((function(t){var i=e.getItemPosition(t);e.updateItemPosition(t,[i.x,i.y])}));for(var n=0;n<this.items.length;n++){var o=this.items[n],r=this.getItemPosition(o);if(!(t&&o===t||!o.dragAndDrop||!this.options.floating&&this.isItemFloating(o)&&!this.getItemsCollidingWithItem(o).length)){var s=this.findLeftMostPositionForItem(o),p=this.findPositionForItem(o,{x:s,y:0},r.y);this.updateItemPosition(o,p)}}}},t.prototype.isOverFixedArea=function(t,e,i,n,o){void 0===o&&(o=null);var r={x:t,y:e,w:i,h:n};"horizontal"!==this.options.direction&&(r={x:e,y:t,w:n,h:i});for(var s=r.x;s<r.x+r.w;s++)for(var p=r.y;p<r.y+r.h;p++)if(this.grid[s]&&this.grid[s][p]&&this.grid[s][p]!==o&&!this.grid[s][p].dragAndDrop)return!0;return!1},t.prototype.checkItemAboveEmptyArea=function(t,e){var i={x:e.x,y:e.y,w:t.w,h:t.h};return!t.itemPrototype&&t.x===e.x&&t.y===e.y||("horizontal"===this.options.direction&&(i={x:e.y,y:e.x,w:i.h,h:i.w}),!this.checkItemsInArea(i.y,i.y+i.h-1,i.x,i.x+i.w-1,t))},t.prototype.fixItemsPositions=function(e){var i=this,n=this.items.filter((function(t){return t.itemComponent})).filter((function(t){return i.isItemValidForGrid(t,e)})),o=this.items.filter((function(t){return t.itemComponent})).filter((function(t){return!i.isItemValidForGrid(t,e)})),r=new t([],e);r.items=n.map((function(t){return t.copyForBreakpoint(e.breakpoint)})),r.generateGrid(),o.forEach((function(t){var i=t.copyForBreakpoint(e.breakpoint),n=r.findPositionForItem(i,{x:0,y:0});r.items.push(i),r.setItemPosition(i,n),r.markItemPositionToGrid(i)})),r.pullItemsToLeft(),r.pushCollidingItems(),this.items.forEach((function(t){var i=r.items.filter((function(e){return e.$element===t.$element}))[0];t.setValueX(i.x,e.breakpoint),t.setValueY(i.y,e.breakpoint),t.setValueW(i.w,e.breakpoint),t.setValueH(i.h,e.breakpoint),t.autoSize=i.autoSize}))},t.prototype.deleteItemPositionFromGrid=function(t){var e,i,n=this.getItemPosition(t);for(e=n.x;e<n.x+n.w;e++)if(this.grid[e])for(i=n.y;i<n.y+n.h;i++)this.grid[e][i]===t&&(this.grid[e][i]=null)},t.prototype.isItemFloating=function(t){if(t.itemComponent&&t.itemComponent.isDragging)return!1;var e=this.getItemPosition(t);return 0!==e.x&&(this.grid[e.x-1]||[]).slice(e.y,e.y+e.h).reduce((function(t,e){return t&&!e}),!0)},t.prototype.isItemValidForGrid=function(t,e){var i="horizontal"===e.direction?{x:t.getValueY(e.breakpoint),y:t.getValueX(e.breakpoint),w:t.getValueH(e.breakpoint),h:Math.min(t.getValueW(this.options.breakpoint),e.lanes)}:{x:t.getValueX(e.breakpoint),y:t.getValueY(e.breakpoint),w:Math.min(t.getValueW(this.options.breakpoint),e.lanes),h:t.getValueH(e.breakpoint)};return"number"==typeof i.x&&"number"==typeof i.y&&i.x+i.w<=e.lanes},t.prototype.findDefaultPositionHorizontal=function(t,e){var i,n;try{for(var o=h(this.grid),r=o.next();!r.done;r=o.next())for(var s=r.value,p=this.grid.indexOf(s),a=0;a<s.length-e+1;){if(!this.checkItemsInArea(p,p+t-1,a,a+e-1))return[p,a];a++}}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return[this.grid.length,0]},t.prototype.findDefaultPositionVertical=function(t,e){var i,n;try{for(var o=h(this.grid),r=o.next();!r.done;r=o.next())for(var s=r.value,p=this.grid.indexOf(s),a=0;a<s.length-t+1;){if(!this.checkItemsInArea(p,p+e-1,a,a+t-1))return[a,p];a++}}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return[0,this.grid.length]},t.prototype.checkItemsInArea=function(t,e,i,n,o){for(var r=t;r<=e;r++)for(var s=i;s<=n;s++)if(this.grid[r]&&this.grid[r][s]&&(!o||this.grid[r][s]!==o))return!0;return!1},t.prototype.sortItemsByPosition=function(){var t=this;this.items.sort((function(e,i){var n=t.getItemPosition(e),o=t.getItemPosition(i);return n.x!==o.x?n.x-o.x:n.y!==o.y?n.y-o.y:0}))},t.prototype.adjustSizeOfItems=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];void 0===e.autoSize&&(e.autoSize=0===e.w||0===e.h),e.autoSize&&("horizontal"===this.options.direction?e.h=this.options.lanes:e.w=this.options.lanes)}},t.prototype.resetGrid=function(){this.grid=[]},t.prototype.itemFitsAtPosition=function(t,e){var i,n,o=this.getItemPosition(t);if(e[0]<0||e[1]<0)return!1;if(e[1]+Math.min(o.h,this.options.lanes)>this.options.lanes)return!1;if(this.isOverFixedArea(t.x,t.y,t.w,t.h))return!1;for(i=e[0];i<e[0]+o.w;i++){var r=this.grid[i];if(r)for(n=e[1];n<e[1]+o.h;n++)if(r[n]&&r[n]!==t)return!1}return!0},t.prototype.updateItemPosition=function(t,e){null!==t.x&&null!==t.y&&this.deleteItemPositionFromGrid(t),this.setItemPosition(t,e),this.markItemPositionToGrid(t)},t.prototype.updateItemSize=function(t,e,i){null!==t.x&&null!==t.y&&this.deleteItemPositionFromGrid(t),t.w=e,t.h=i,this.markItemPositionToGrid(t)},t.prototype.markItemPositionToGrid=function(t){var e,i,n=this.getItemPosition(t);for(this.ensureColumns(n.x+n.w),e=n.x;e<n.x+n.w;e++)for(i=n.y;i<n.y+n.h;i++)this.grid[e][i]=t},t.prototype.ensureColumns=function(t){for(var e=0;e<t;e++)this.grid[e]||this.grid.push(new E(this.options.lanes))},t.prototype.getItemsCollidingWithItem=function(t){for(var e=[],i=0;i<this.items.length;i++)t!==this.items[i]&&this.itemsAreColliding(t,this.items[i])&&e.push(i);return e},t.prototype.itemsAreColliding=function(t,e){var i=this.getItemPosition(t),n=this.getItemPosition(e);return!(n.x>=i.x+i.w||n.x+n.w<=i.x||n.y>=i.y+i.h||n.y+n.h<=i.y)},t.prototype.tryToResolveCollisionsLocally=function(e){var i=this.getItemsCollidingWithItem(e);if(!i.length)return!0;for(var n,o,r,s,p=new t(this.items.map((function(t){return t.copy()})),this.options),a=0;a<i.length;a++){var h=p.items[i[a]],l=this.getItemPosition(h),u=this.getItemPosition(e);if(n=[u.x-l.w,l.y],o=[u.x+u.w,l.y],r=[l.x,u.y-l.h],s=[l.x,u.y+u.h],p.itemFitsAtPosition(h,n))p.updateItemPosition(h,n);else if(p.itemFitsAtPosition(h,r))p.updateItemPosition(h,r);else if(p.itemFitsAtPosition(h,s))p.updateItemPosition(h,s);else{if(!p.itemFitsAtPosition(h,o))return!1;p.updateItemPosition(h,o)}}return this.items.forEach((function(t,e){var i=p.items.filter((function(e){return e.$element===t.$element}))[0];t.x=i.x,t.y=i.y,t.w=i.w,t.h=i.h,t.autoSize=i.autoSize})),this.generateGrid(),!0},t.prototype.findLeftMostPositionForItem=function(t){for(var e=0,i=this.getItemPosition(t),n=0;n<this.grid.length;n++)for(var o=i.y;o<i.y+i.h;o++){var r=this.grid[n][o];if(r){var s=this.getItemPosition(r);this.items.indexOf(r)<this.items.indexOf(t)&&(e=s.x+s.w)}}return e},t.prototype.findItemByPosition=function(t,e){for(var i=0;i<this.items.length;i++)if(this.items[i].x===t&&this.items[i].y===e)return this.items[i]},t.prototype.getItemByAttribute=function(t,e){for(var i=0;i<this.items.length;i++)if(this.items[i][t]===e)return this.items[i];return null},t.prototype.padNumber=function(t,e){return t>=10?t:e+t},t.prototype.getItemPosition=function(t){return"horizontal"===this.options.direction?t:{x:t.y,y:t.x,w:t.h,h:t.w}},t.prototype.setItemPosition=function(t,e){"horizontal"===this.options.direction?(t.x=e[0],t.y=e[1]):(t.x=e[1],t.y=e[0])},t}(),I=function(){function t(){var t=this;this.items=[],this._items=[],this._itemsMap={},this.disabledItems=[],this.debounceRenderSubject=new n.Subject,this.itemRemoveSubject=new n.Subject,this.isInit=!1,this.itemRemoveSubject.pipe(o.debounceTime(0)).subscribe((function(){t.gridList.pullItemsToLeft(),t.render(),t.updateCachedItems()})),this.debounceRenderSubject.pipe(o.debounceTime(0)).subscribe((function(){return t.render()}))}return t.prototype.isInitialized=function(){return this.isInit},t.prototype.registerItem=function(t){return this.items.push(t),t},t.prototype.init=function(t){this.gridsterComponent=t,this.draggableOptions=t.draggableOptions,this.gridsterOptions=t.gridsterOptions},t.prototype.start=function(){var t=this;this.updateMaxItemSize(),this.$positionHighlight&&this.removePositionHighlight(),this.initGridList(),this.isInit=!0,setTimeout((function(){t.copyItems(),t.fixItemsPositions(),t.gridsterComponent.reflowGridster(!0),t.gridsterComponent.setReady()}))},t.prototype.initGridList=function(){this.gridList=new P(this.items,this.options)},t.prototype.render=function(){this.updateMaxItemSize(),this.gridList.generateGrid(),this.applySizeToItems(),this.applyPositionToItems(),this.refreshLines()},t.prototype.reflow=function(){this.calculateCellSize(),this.render()},t.prototype.fixItemsPositions=function(){var t=this;this.options.responsiveSizes?this.gridList.fixItemsPositions(this.options):(this.gridList.fixItemsPositions(this.gridsterOptions.basicOptions),this.gridsterOptions.responsiveOptions.forEach((function(e){t.gridList.fixItemsPositions(e)}))),this.updateCachedItems()},t.prototype.removeItem=function(t){this.items.indexOf(t)>=0&&this.items.splice(this.items.indexOf(t),1),this.gridList.deleteItemPositionFromGrid(t),this.removeItemFromCache(t)},t.prototype.onResizeStart=function(t){this.currentElement=t.$element,this.copyItems(),this._maxGridCols=this.gridList.grid.length,this.highlightPositionForItem(t),this.gridsterComponent.isResizing=!0,this.refreshLines()},t.prototype.onResizeDrag=function(t){var e=this.snapItemSizeToGrid(t),i=this.dragSizeChanged(e),n=this.snapItemPositionToGrid(t),o=this.dragPositionChanged(n);(i||o)&&(this.restoreCachedItems(),this.gridList.generateGrid(),this.previousDragPosition=n,this.previousDragSize=e,this.gridList.moveAndResize(t,n,{w:e[0],h:e[1]}),this.applyPositionToItems(!0),this.highlightPositionForItem(t))},t.prototype.onResizeStop=function(t){this.currentElement=void 0,this.updateCachedItems(),this.previousDragSize=null,this.removePositionHighlight(),this.gridsterComponent.isResizing=!1,this.gridList.pullItemsToLeft(t),this.debounceRenderSubject.next(),this.fixItemsPositions()},t.prototype.onStart=function(t){this.currentElement=t.$element,this.copyItems(),this._maxGridCols=this.gridList.grid.length,this.gridsterComponent.isDragging=!0,this.gridsterComponent.updateGridsterElementData(),this.refreshLines()},t.prototype.onDrag=function(t){var e=this.snapItemPositionToGrid(t);if(this.dragPositionChanged(e)){if(this.restoreCachedItems(),this.gridList.generateGrid(),this.previousDragPosition=e,"none"===this.options.direction&&!this.gridList.checkItemAboveEmptyArea(t,{x:e[0],y:e[1]}))return;this.gridList.moveItemToPosition(t,e),this.applyPositionToItems(!0),this.highlightPositionForItem(t)}},t.prototype.cancel=function(){this.restoreCachedItems(),this.previousDragPosition=null,this.updateMaxItemSize(),this.applyPositionToItems(),this.removePositionHighlight(),this.currentElement=void 0,this.gridsterComponent.isDragging=!1},t.prototype.onDragOut=function(t){this.cancel();var e=this.items.indexOf(t);e>=0&&this.items.splice(e,1),this.gridList.pullItemsToLeft(),this.render()},t.prototype.onStop=function(t){this.currentElement=void 0,this.updateCachedItems(),this.previousDragPosition=null,this.removePositionHighlight(),this.gridList.pullItemsToLeft(t),this.gridsterComponent.isDragging=!1,this.refreshLines()},t.prototype.calculateCellSize=function(){"horizontal"===this.options.direction?(this.cellHeight=this.calculateCellHeight(),this.cellWidth=this.options.cellWidth||this.cellHeight*this.options.widthHeightRatio):(this.cellWidth=this.calculateCellWidth(),this.cellHeight=this.options.cellHeight||this.cellWidth/this.options.widthHeightRatio),this.options.heightToFontSizeRatio&&(this._fontSize=this.cellHeight*this.options.heightToFontSizeRatio)},t.prototype.applyPositionToItems=function(t){this.options.shrink||(t=!0);for(var e=0;e<this.items.length;e++)this.isCurrentElement(this.items[e].$element)||this.items[e].applyPosition(this);var i=this.gridsterComponent.$element.firstChild;if("horizontal"===this.options.direction){var n=t?this.maxItemWidth:0;i.style.height="",i.style.width=(this.gridList.grid.length+n)*this.cellWidth+"px"}else if(this.gridList.grid.length){var o=t?this.maxItemHeight:0;i.style.height=(this.gridList.grid.length+o)*this.cellHeight+"px",i.style.width=""}},t.prototype.refreshLines=function(){var t=this.gridsterComponent.$element.firstChild;if(this.options.lines&&this.options.lines.visible&&(this.gridsterComponent.isDragging||this.gridsterComponent.isResizing||this.options.lines.always)){var e=this.options.lines.color||"#d8d8d8",i=this.options.lines.backgroundColor||"transparent",n=this.options.lines.width||1,o=n/2;t.style.backgroundSize=this.cellWidth+"px "+this.cellHeight+"px",t.style.backgroundPosition="-"+o+"px -"+o+"px",t.style.backgroundImage="\n                linear-gradient(to right, "+e+" "+n+"px, "+i+" "+n+"px),\n                linear-gradient(to bottom, "+e+" "+n+"px, "+i+" "+n+"px)\n            "}else t.style.backgroundSize="",t.style.backgroundPosition="",t.style.backgroundImage=""},t.prototype.removeItemFromCache=function(t){var e=this;this._items=this._items.filter((function(e){return e.$element!==t.$element})),Object.keys(this._itemsMap).forEach((function(i){e._itemsMap[i]=e._itemsMap[i].filter((function(e){return e.$element!==t.$element}))}))},t.prototype.copyItems=function(){var t=this;this._items=this.items.filter((function(e){return t.isValidGridItem(e)})).map((function(t){return t.copyForBreakpoint(null)})),this.gridsterOptions.responsiveOptions.forEach((function(e){t._itemsMap[e.breakpoint]=t.items.filter((function(e){return t.isValidGridItem(e)})).map((function(t){return t.copyForBreakpoint(e.breakpoint)}))}))},t.prototype.updateMaxItemSize=function(){this.maxItemWidth=Math.max.apply(null,this.items.map((function(t){return t.w}))),this.maxItemHeight=Math.max.apply(null,this.items.map((function(t){return t.h})))},t.prototype.restoreCachedItems=function(){var t=this,e=this.options.breakpoint?this._itemsMap[this.options.breakpoint]:this._items;this.items.filter((function(e){return t.isValidGridItem(e)})).forEach((function(t){var i=e.filter((function(e){return e.$element===t.$element}))[0];t.x=i.x,t.y=i.y,t.w=i.w,t.h=i.h,t.autoSize=i.autoSize}))},t.prototype.isValidGridItem=function(t){return"none"!==this.options.direction||!!t.itemComponent},t.prototype.calculateCellWidth=function(){return parseFloat(window.getComputedStyle(this.gridsterComponent.$element).width)/this.options.lanes},t.prototype.calculateCellHeight=function(){return parseFloat(window.getComputedStyle(this.gridsterComponent.$element).height)/this.options.lanes},t.prototype.applySizeToItems=function(){for(var t=0;t<this.items.length;t++)this.items[t].applySize(),this.options.heightToFontSizeRatio&&(this.items[t].$element.style["font-size"]=this._fontSize)},t.prototype.isCurrentElement=function(t){return!!this.currentElement&&t===this.currentElement},t.prototype.snapItemSizeToGrid=function(t){var e=parseInt(t.$element.style.width,10)-1,i=parseInt(t.$element.style.height,10)-1,n=Math.round(e/this.cellWidth),o=Math.round(i/this.cellHeight);return n=Math.max(n,1),o=Math.max(o,1),this.gridList.isOverFixedArea(t.x,t.y,n,o,t)?[t.w,t.h]:[n,o]},t.prototype.generateItemPosition=function(t){var e;if(t.itemPrototype){var i=t.itemPrototype.getPositionToGridster(this);e={x:Math.round(i.x/this.cellWidth),y:Math.round(i.y/this.cellHeight)}}else e={x:Math.round(t.positionX/this.cellWidth),y:Math.round(t.positionY/this.cellHeight)};return e},t.prototype.snapItemPositionToGrid=function(t){var e=this.generateItemPosition(t),i=e.x,n=e.y;return i=Math.max(i,0),n=Math.max(n,0),i="horizontal"===this.options.direction?Math.min(i,this._maxGridCols):Math.min(i,Math.max(0,this.options.lanes-t.w)),this.gridList.isOverFixedArea(i,n,t.w,t.h)?[t.x,t.y]:[i,n]},t.prototype.dragSizeChanged=function(t){return!this.previousDragSize||(t[0]!==this.previousDragSize[0]||t[1]!==this.previousDragSize[1])},t.prototype.dragPositionChanged=function(t){return!this.previousDragPosition||(t[0]!==this.previousDragPosition[0]||t[1]!==this.previousDragPosition[1])},t.prototype.highlightPositionForItem=function(t){var e=t.calculateSize(this),i=t.calculatePosition(this);this.$positionHighlight.style.width=e.width+"px",this.$positionHighlight.style.height=e.height+"px",this.$positionHighlight.style.left=i.left+"px",this.$positionHighlight.style.top=i.top+"px",this.$positionHighlight.style.display="",this.options.heightToFontSizeRatio&&(this.$positionHighlight.style["font-size"]=this._fontSize)},t.prototype.updateCachedItems=function(){var t=this;this.triggerOnChange(null),this.gridsterOptions.responsiveOptions.forEach((function(e){t.triggerOnChange(e.breakpoint)})),this.copyItems()},t.prototype.triggerOnChange=function(t){var e=t?this._itemsMap[t]:this._items;this.gridList.getChangedItems(e||[],t).filter((function(t){return t.item.itemComponent})).forEach((function(e){e.changes.indexOf("x")>=0&&e.item.triggerChangeX(t),e.changes.indexOf("y")>=0&&e.item.triggerChangeY(t),e.changes.indexOf("w")>=0&&e.item.triggerChangeW(t),e.changes.indexOf("h")>=0&&e.item.triggerChangeH(t),e.item.itemComponent.change.emit({item:e.item,oldValues:e.oldValues||{},isNew:e.isNew,changes:e.changes,breakpoint:t})}))},t.prototype.removePositionHighlight=function(){this.$positionHighlight.style.display="none"},t=s([e.Injectable(),a("design:paramtypes",[])],t)}(),S=function(){function t(){this.isDragging=!1,this.dragSubject=new n.Subject,this.dragStartSubject=new n.Subject,this.dragStopSubject=new n.Subject}return t.prototype.observeDropOver=function(t){var e=this;return this.dragStopSubject.pipe(o.filter((function(i){var n=t.gridsterComponent.$element;return![].slice.call(n.querySelectorAll("gridster")).reduce((function(n,o){return n||e.isOverGridster(i.item,o,i.event,t.options)}),!1)&&e.isOverGridster(i.item,n,i.event,t.options)})),o.tap((function(e){e.item.onDrop(t)})))},t.prototype.observeDropOut=function(t){var e=this;return this.dragStopSubject.pipe(o.filter((function(i){var n=t.gridsterComponent.$element;return!e.isOverGridster(i.item,n,i.event,t.options)})),o.tap((function(t){t.item.onCancel()})))},t.prototype.observeDragOver=function(t){var e=this,i=this.dragSubject.pipe(o.map((function(i){var n=t.gridsterComponent.$element;return{item:i.item,event:i.event,isOver:e.isOverGridster(i.item,n,i.event,t.options),isDrop:!1}}))),r=this.dragStopSubject.pipe(o.map((function(i){var n=t.gridsterComponent.$element;return{item:i.item,event:i.event,isOver:e.isOverGridster(i.item,n,i.event,t.options),isDrop:!0}}))),s=n.merge(this.dragStartSubject.pipe(o.map((function(){return{item:null,isOver:!1,isDrop:!1}}))),i,r).pipe(o.scan((function(t,e){return{item:e.item,event:e.event,isOver:e.isOver,isEnter:!1===t.isOver&&!0===e.isOver,isOut:!0===t.isOver&&!1===e.isOver&&!t.isDrop,isDrop:e.isDrop}})),o.filter((function(t){return!t.isDrop})),o.share()),p=this.createDragEnterObservable(s,t),a=this.createDragOutObservable(s,t),h=p.pipe(o.switchMap((function(){return e.dragSubject.pipe(o.takeUntil(a))})),o.map((function(t){return t.item})));return{dragEnter:p,dragOut:a,dragOver:h}},t.prototype.dragItemStart=function(t,e){this.isDragging=!0,this.dragStartSubject.next({item:t,event:e})},t.prototype.dragItemStop=function(t,e){this.isDragging=!1,this.dragStopSubject.next({item:t,event:e})},t.prototype.updatePrototypePosition=function(t,e){this.dragSubject.next({item:t,event:e})},t.prototype.createDragOverObservable=function(t,e){return t.pipe(o.filter((function(t){return t.isOver&&!t.isEnter&&!t.isOut})),o.map((function(t){return t.item})),o.tap((function(t){return t.onOver(e)})))},t.prototype.createDragEnterObservable=function(t,e){return t.pipe(o.filter((function(t){return t.isEnter})),o.map((function(t){return t.item})),o.tap((function(t){return t.onEnter(e)})))},t.prototype.createDragOutObservable=function(t,e){return t.pipe(o.filter((function(t){return t.isOut})),o.map((function(t){return t.item})),o.tap((function(t){return t.onOut(e)})))},t.prototype.isOverGridster=function(t,e,i,n){var o=t.$element,r=e.parentElement&&e.parentElement.closest("gridster-item");if(r)return this.isOverGridster(t,r,i,n);switch(n.tolerance){case"fit":return f(o,e);case"intersect":return y(o,e);case"touch":return v(o,e);default:return b(i,e)}},t=s([e.Injectable(),a("design:paramtypes",[])],t)}(),C=function(){function t(t,e){var i=this;this.defaults={lanes:5,direction:"horizontal",widthHeightRatio:1,shrink:!1,responsiveView:!0,responsiveSizes:!1,responsiveToParent:!1,dragAndDrop:!0,resizable:!1,useCSSTransforms:!1,floating:!0,tolerance:"pointer"},this.responsiveOptions=[],this.breakpointsMap={sm:576,md:768,lg:992,xl:1200};var r=t.responsiveToParent?e:window;this.basicOptions=t,this.responsiveOptions=this.extendResponsiveOptions(t.responsiveOptions||[]),this.change=n.merge(n.of(this.getOptionsByWidth(this.getElementWidth(r))),n.fromEvent(window,"resize").pipe(o.debounceTime(t.responsiveDebounce||0),o.map((function(t){return i.getOptionsByWidth(i.getElementWidth(r))})))).pipe(o.distinctUntilChanged(null,(function(t){return t.minWidth})))}return t.prototype.getOptionsByWidth=function(t){for(var e=0,i=Object.assign({},this.defaults,this.basicOptions);this.responsiveOptions[e];)this.responsiveOptions[e].minWidth<=t&&(i=this.responsiveOptions[e]),e++;return i},t.prototype.extendResponsiveOptions=function(t){var e=this;return t.filter((function(t){return t.breakpoint})).map((function(t){return Object.assign({minWidth:e.breakpointsMap[t.breakpoint]||0},t)})).sort((function(t,e){return t.minWidth-e.minWidth})).map((function(t){return Object.assign({},e.defaults,e.basicOptions,t)}))},t.prototype.getElementWidth=function(t){return t===window?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:t.clientWidth},t}(),D=function(){function t(t,i,o,r){this.zone=t,this.gridsterPrototype=r,this.optionsChange=new e.EventEmitter,this.ready=new e.EventEmitter,this.reflow=new e.EventEmitter,this.prototypeDrop=new e.EventEmitter,this.prototypeEnter=new e.EventEmitter,this.prototypeOut=new e.EventEmitter,this.draggableOptions={},this.isDragging=!1,this.isResizing=!1,this.isReady=!1,this.isPrototypeEntered=!1,this.isDisabled=!1,this.subscription=new n.Subscription,this.gridster=o,this.$element=i.nativeElement}return t.prototype.ngOnInit=function(){var t=this;this.gridsterOptions=new C(this.options,this.$element),this.options.useCSSTransforms&&this.$element.classList.add("css-transform"),this.subscription.add(this.gridsterOptions.change.subscribe((function(e){t.gridster.options=e,t.gridster.gridList&&(t.gridster.gridList.options=e),setTimeout((function(){return t.optionsChange.emit(e)}))}))),this.gridster.init(this),this.subscription.add(n.fromEvent(window,"resize").pipe(o.debounceTime(this.gridster.options.responsiveDebounce||0),o.filter((function(){return t.gridster.options.responsiveView}))).subscribe((function(){return t.reload()}))),this.zone.runOutsideAngular((function(){t.subscription.add(n.fromEvent(document,"scroll",{passive:!0}).subscribe((function(){return t.updateGridsterElementData()})));var e=O(t.$element);e&&t.subscription.add(n.fromEvent(e,"scroll",{passive:!0}).subscribe((function(){return t.updateGridsterElementData()})))}))},t.prototype.ngAfterContentInit=function(){this.gridster.start(),this.updateGridsterElementData(),this.connectGridsterPrototype(),this.gridster.$positionHighlight=this.$positionHighlight.nativeElement},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.setOption=function(t,e){return"dragAndDrop"===t&&(e?this.enableDraggable():this.disableDraggable()),"resizable"===t&&(e?this.enableResizable():this.disableResizable()),"lanes"===t&&(this.gridster.options.lanes=e,this.gridster.gridList.fixItemsPositions(this.gridster.options),this.reflowGridster()),"direction"===t&&(this.gridster.options.direction=e,this.gridster.gridList.pullItemsToLeft()),"widthHeightRatio"===t&&(this.gridster.options.widthHeightRatio=parseFloat(e||1)),"responsiveView"===t&&(this.gridster.options.responsiveView=!!e),this.gridster.gridList.setOption(t,e),this},t.prototype.reload=function(){var t=this;return setTimeout((function(){t.gridster.fixItemsPositions(),t.reflowGridster()})),this},t.prototype.reflowGridster=function(t){void 0===t&&(t=!1),this.gridster.reflow(),this.reflow.emit({isInit:t,gridsterComponent:this})},t.prototype.updateGridsterElementData=function(){this.gridster.gridsterScrollData=this.getScrollPositionFromParents(this.$element),this.gridster.gridsterRect=this.$element.getBoundingClientRect()},t.prototype.setReady=function(){var t=this;setTimeout((function(){return t.isReady=!0})),this.ready.emit()},t.prototype.adjustItemsHeightToContent=function(t){var e=this;void 0===t&&(t=".gridster-item-inner"),this.gridster.items.map((function(e){var i=e.$element.querySelector(t),n=i.lastElementChild,o=w(i,e.$element),r=i.getBoundingClientRect();return{item:e,contentHeight:n.getBoundingClientRect().bottom-r.top,scrollElDistance:o}})).forEach((function(t){t.item.h=Math.ceil(t.contentHeight/(e.gridster.cellHeight-t.scrollElDistance.top))})),this.gridster.fixItemsPositions(),this.gridster.reflow()},t.prototype.disable=function(t){var e=this.gridster.items.indexOf(t.itemComponent);this.isDisabled=!0,e>=0&&delete this.gridster.items[this.gridster.items.indexOf(t.itemComponent)],this.gridster.onDragOut(t)},t.prototype.enable=function(){this.isDisabled=!1},t.prototype.getScrollPositionFromParents=function(t,e){return void 0===e&&(e={scrollTop:0,scrollLeft:0}),t.parentElement&&t.parentElement!==document.body?(e.scrollTop+=t.parentElement.scrollTop,e.scrollLeft+=t.parentElement.scrollLeft,this.getScrollPositionFromParents(t.parentElement,e)):{scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}},t.prototype.connectGridsterPrototype=function(){var t=this;this.gridsterPrototype.observeDropOut(this.gridster).subscribe();var e=this.gridsterPrototype.observeDropOver(this.gridster).pipe(o.publish()),i=this.gridsterPrototype.observeDragOver(this.gridster);i.dragOver.pipe(o.filter((function(){return!t.isDisabled}))).subscribe((function(e){t.isPrototypeEntered&&t.gridster.onDrag(e.item)})),i.dragEnter.pipe(o.filter((function(){return!t.isDisabled}))).subscribe((function(e){t.isPrototypeEntered=!0,t.gridster.items.indexOf(e.item)<0&&t.gridster.items.push(e.item),t.gridster.onStart(e.item),e.setDragContextGridster(t.gridster),t.parent&&t.parent.disable(e.item),t.prototypeEnter.emit({item:e.item})})),i.dragOut.pipe(o.filter((function(){return!t.isDisabled}))).subscribe((function(e){t.isPrototypeEntered&&(t.gridster.onDragOut(e.item),t.isPrototypeEntered=!1,t.prototypeOut.emit({item:e.item}),t.parent&&(t.parent.enable(),t.parent.isPrototypeEntered=!0,t.parent.gridster.items.indexOf(e.item)<0&&t.parent.gridster.items.push(e.item),t.parent.gridster.onStart(e.item),e.setDragContextGridster(t.parent.gridster),setTimeout((function(){t.parent.prototypeEnter.emit({item:e.item}),e.onEnter(t.parent.gridster)}))))})),e.pipe(o.filter((function(){return!t.isDisabled}))).subscribe((function(e){t.isPrototypeEntered&&(t.gridster.onStop(e.item.item),t.gridster.removeItem(e.item.item),t.isPrototypeEntered=!1,t.parent&&t.parent.enable(),t.prototypeDrop.emit({item:e.item.item}))})),e.connect()},t.prototype.enableDraggable=function(){this.gridster.options.dragAndDrop=!0,this.gridster.items.filter((function(t){return t.itemComponent&&t.itemComponent.dragAndDrop})).forEach((function(t){return t.itemComponent.enableDragDrop()}))},t.prototype.disableDraggable=function(){this.gridster.options.dragAndDrop=!1,this.gridster.items.filter((function(t){return t.itemComponent})).forEach((function(t){return t.itemComponent.disableDraggable()}))},t.prototype.enableResizable=function(){this.gridster.options.resizable=!0,this.gridster.items.filter((function(t){return t.itemComponent&&t.itemComponent.resizable})).forEach((function(t){return t.itemComponent.enableResizable()}))},t.prototype.disableResizable=function(){this.gridster.options.resizable=!1,this.gridster.items.forEach((function(t){return t.itemComponent.disableResizable()}))},t.ctorParameters=function(){return[{type:e.NgZone},{type:e.ElementRef},{type:I},{type:S}]},s([e.Input(),a("design:type",Object)],t.prototype,"options",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"optionsChange",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"ready",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"reflow",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"prototypeDrop",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"prototypeEnter",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"prototypeOut",void 0),s([e.Input(),a("design:type",Object)],t.prototype,"draggableOptions",void 0),s([e.Input(),a("design:type",t)],t.prototype,"parent",void 0),s([e.ViewChild("positionHighlight",{static:!0}),a("design:type",Object)],t.prototype,"$positionHighlight",void 0),s([e.HostBinding("class.gridster--dragging"),a("design:type",Object)],t.prototype,"isDragging",void 0),s([e.HostBinding("class.gridster--resizing"),a("design:type",Object)],t.prototype,"isResizing",void 0),s([e.HostBinding("class.gridster--ready"),a("design:type",Object)],t.prototype,"isReady",void 0),t=s([e.Component({selector:"ngx-gridster",template:'<div class="gridster-container">\n      <ng-content></ng-content>\n      <div class="position-highlight" style="display:none;" #positionHighlight>\n        <div class="inner"></div>\n      </div>\n    </div>',providers:[I],changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,styles:["\n            ngx-gridster {\n                position: relative;\n                display: block;\n                left: 0;\n                width: 100%;\n            }\n\n            ngx-gridster.gridster--dragging {\n                -moz-user-select: none;\n                -khtml-user-select: none;\n                -webkit-user-select: none;\n                -ms-user-select: none;\n                user-select: none;\n            }\n\n            ngx-gridster .gridster-container {\n                position: relative;\n                width: 100%;\n                list-style: none;\n                -webkit-transition: width 0.2s, height 0.2s;\n                transition: width 0.2s, height 0.2s;\n            }\n\n            ngx-gridster .position-highlight {\n                display: block;\n                position: absolute;\n                z-index: 1;\n            }\n        "]}),a("design:paramtypes",[e.NgZone,e.ElementRef,I,S])],t)}(),z=function(){function t(){}return Object.defineProperty(t.prototype,"$element",{get:function(){return this.getItem().$element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){var t=this.getItem(),e=t.gridster?t.gridster.options.breakpoint:null;return this.getValueX(e)},set:function(t){var e=this.getItem(),i=e.gridster?e.gridster.options.breakpoint:null;this.setValueX(t,i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t=this.getItem(),e=t.gridster?t.gridster.options.breakpoint:null;return this.getValueY(e)},set:function(t){var e=this.getItem(),i=e.gridster?e.gridster.options.breakpoint:null;this.setValueY(t,i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){var t=this.getItem(),e=t.gridster?t.gridster.options.breakpoint:null;return this.getValueW(e)},set:function(t){var e=this.getItem(),i=e.gridster?e.gridster.options.breakpoint:null;this.setValueW(t,i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){var t=this.getItem(),e=t.gridster?t.gridster.options.breakpoint:null;return this.getValueH(e)},set:function(t){var e=this.getItem(),i=e.gridster?e.gridster.options.breakpoint:null;this.setValueH(t,i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSize",{get:function(){return this.getItem().autoSize},set:function(t){this.getItem().autoSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragAndDrop",{get:function(){return!!this.getItem().dragAndDrop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return!!this.getItem().resizable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionX",{get:function(){var t=this.itemComponent||this.itemPrototype;return t?t.positionX:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionY",{get:function(){var t=this.itemComponent||this.itemPrototype;return t?t.positionY:null},enumerable:!0,configurable:!0}),t.prototype.setFromGridsterItem=function(t){if(this.isItemSet())throw new Error("GridListItem is already set.");return this.itemComponent=t,this},t.prototype.setFromGridsterItemPrototype=function(t){if(this.isItemSet())throw new Error("GridListItem is already set.");return this.itemPrototype=t,this},t.prototype.setFromObjectLiteral=function(t){if(this.isItemSet())throw new Error("GridListItem is already set.");return this.itemObject=t,this},t.prototype.copy=function(){return(new t).setFromObjectLiteral({$element:this.$element,x:this.x,y:this.y,w:this.w,h:this.h,autoSize:this.autoSize,dragAndDrop:this.dragAndDrop,resizable:this.resizable})},t.prototype.copyForBreakpoint=function(e){return(new t).setFromObjectLiteral({$element:this.$element,x:this.getValueX(e),y:this.getValueY(e),w:this.getValueW(e),h:this.getValueH(e),autoSize:this.autoSize,dragAndDrop:this.dragAndDrop,resizable:this.resizable})},t.prototype.getValueX=function(t){return this.getItem()[this.getXProperty(t)]},t.prototype.getValueY=function(t){return this.getItem()[this.getYProperty(t)]},t.prototype.getValueW=function(t){return this.getItem()[this.getWProperty(t)]||1},t.prototype.getValueH=function(t){return this.getItem()[this.getHProperty(t)]||1},t.prototype.setValueX=function(t,e){this.getItem()[this.getXProperty(e)]=t},t.prototype.setValueY=function(t,e){this.getItem()[this.getYProperty(e)]=t},t.prototype.setValueW=function(t,e){this.getItem()[this.getWProperty(e)]=t},t.prototype.setValueH=function(t,e){this.getItem()[this.getHProperty(e)]=t},t.prototype.triggerChangeX=function(t){var e=this.itemComponent;e&&e[this.getXProperty(t)+"Change"].emit(this.getValueX(t))},t.prototype.triggerChangeY=function(t){var e=this.itemComponent;e&&e[this.getYProperty(t)+"Change"].emit(this.getValueY(t))},t.prototype.triggerChangeW=function(t){var e=this.itemComponent;e&&e[this.getWProperty(t)+"Change"].emit(this.getValueW(t))},t.prototype.triggerChangeH=function(t){var e=this.itemComponent;e&&e[this.getHProperty(t)+"Change"].emit(this.getValueH(t))},t.prototype.hasPositions=function(t){var e=this.getValueX(t),i=this.getValueY(t);return(e||0===e)&&(i||0===i)},t.prototype.applyPosition=function(t){var e=this.calculatePosition(t);this.itemComponent.positionX=e.left,this.itemComponent.positionY=e.top,this.itemComponent.updateElemenetPosition()},t.prototype.calculatePosition=function(t){return t||this.itemComponent?(t=t||this.itemComponent.gridster,{left:this.x*t.cellWidth,top:this.y*t.cellHeight}):{left:0,top:0}},t.prototype.applySize=function(t){var e=this.calculateSize(t);this.$element.style.width=e.width+"px",this.$element.style.height=e.height+"px"},t.prototype.calculateSize=function(t){if(!t&&!this.itemComponent)return{width:0,height:0};t=t||this.itemComponent.gridster;var e=this.getValueW(t.options.breakpoint),i=this.getValueH(t.options.breakpoint);return"vertical"===t.options.direction&&(e=Math.min(e,t.options.lanes)),"horizontal"===t.options.direction&&(i=Math.min(i,t.options.lanes)),{width:e*t.cellWidth,height:i*t.cellHeight}},t.prototype.getXProperty=function(e){return e&&this.itemComponent?t.X_PROPERTY_MAP[e]:"x"},t.prototype.getYProperty=function(e){return e&&this.itemComponent?t.Y_PROPERTY_MAP[e]:"y"},t.prototype.getWProperty=function(e){if(this.itemPrototype)return this.itemPrototype[t.W_PROPERTY_MAP[e]]?t.W_PROPERTY_MAP[e]:"w";var i=this.getItem(),n=i.gridster&&i.gridster.options.responsiveSizes;return e&&n?t.W_PROPERTY_MAP[e]:"w"},t.prototype.getHProperty=function(e){if(this.itemPrototype)return this.itemPrototype[t.H_PROPERTY_MAP[e]]?t.H_PROPERTY_MAP[e]:"h";var i=this.getItem(),n=i.gridster&&i.gridster.options.responsiveSizes;return e&&n?t.H_PROPERTY_MAP[e]:"h"},t.prototype.getItem=function(){var t=this.itemComponent||this.itemPrototype||this.itemObject;if(!t)throw new Error("GridListItem is not set.");return t},t.prototype.isItemSet=function(){return this.itemComponent||this.itemPrototype||this.itemObject},t.BREAKPOINTS=["sm","md","lg","xl"],t.X_PROPERTY_MAP={sm:"xSm",md:"xMd",lg:"xLg",xl:"xXl"},t.Y_PROPERTY_MAP={sm:"ySm",md:"yMd",lg:"yLg",xl:"yXl"},t.W_PROPERTY_MAP={sm:"wSm",md:"wMd",lg:"wLg",xl:"wXl"},t.H_PROPERTY_MAP={sm:"hSm",md:"hMd",lg:"hLg",xl:"hXl"},t}(),R=function(){function t(t){t.touches?(this.touchEvent=t,this.setDataFromTouchEvent(this.touchEvent)):(this.mouseEvent=t,this.setDataFromMouseEvent(this.mouseEvent))}return t.prototype.isTouchEvent=function(){return!!this.touchEvent},t.prototype.pauseEvent=function(){var t=this.touchEvent||this.mouseEvent;return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},t.prototype.getRelativeCoordinates=function(t){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,n=t.getBoundingClientRect();return{x:this.pageX-n.left-i,y:this.pageY-n.top-e}},t.prototype.setDataFromMouseEvent=function(t){this.target=t.target,this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.type=t.type},t.prototype.setDataFromTouchEvent=function(t){var e=t.touches[0]||t.changedTouches[0];this.target=t.target,this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.pageX,this.pageY=e.pageY,this.type=t.type},t}(),L=function(){function t(t,e){void 0===e&&(e={}),this.mousemove=n.merge(n.fromEvent(document,"mousemove"),n.fromEvent(document,"touchmove",{passive:!1})).pipe(o.share()),this.mouseup=n.merge(n.fromEvent(document,"mouseup"),n.fromEvent(document,"touchend"),n.fromEvent(document,"touchcancel")).pipe(o.share()),this.config={handlerClass:null,scroll:!0,scrollEdge:36,scrollDirection:null},this.autoScrollingInterval=[],this.element=t,this.mousedown=n.merge(n.fromEvent(t,"mousedown"),n.fromEvent(t,"touchstart")).pipe(o.share()),this.config=r(r({},this.config),e),this.dragStart=this.createDragStartObservable().pipe(o.share()),this.dragMove=this.createDragMoveObservable(this.dragStart),this.dragStop=this.createDragStopObservable(this.dragStart),this.fixProblemWithDnDForIE(t),this.requestAnimationFrame=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},this.cancelAnimationFrame=window.cancelAnimationFrame||function(t){return clearTimeout(t)}}return t.prototype.createDragStartObservable=function(){var t=this;return this.mousedown.pipe(o.map((function(t){return new R(t)})),o.filter((function(e){return t.isDragingByHandler(e)})),o.tap((function(t){t.isTouchEvent()||t.pauseEvent(),document.activeElement&&document.activeElement.blur(),m()})),o.switchMap((function(e){return t.mousemove.pipe(o.map((function(t){return new R(t)})),o.filter((function(i){return t.inRange(e,i,5)})),o.map((function(){return e})),o.takeUntil(t.mouseup),o.take(1))})))},t.prototype.createDragMoveObservable=function(t){var e=this;return t.pipe(o.tap((function(t){e.addTouchActionNone(t.target)})),o.switchMap((function(t){return e.mousemove.pipe(o.skip(1),o.map((function(t){return new R(t)})),o.tap((function(e){e.pauseEvent(),t.pauseEvent()})),o.takeUntil(e.mouseup))})),o.filter((function(t){return!!t})),o.tap((function(t){e.config.scroll&&e.startScroll(e.element,t)})))},t.prototype.createDragStopObservable=function(t){var e=this;return t.pipe(o.switchMap((function(){return e.mouseup.pipe(o.take(1))})),o.map((function(t){return new R(t)})),o.tap((function(t){t.target&&e.removeTouchActionNone(t.target),e.autoScrollingInterval.forEach((function(t){return e.cancelAnimationFrame(t)}))})))},t.prototype.startScroll=function(t,e){var i=this,n=this.getScrollContainer(t);this.autoScrollingInterval.forEach((function(t){return i.cancelAnimationFrame(t)})),n?this.startScrollForContainer(e,n):this.startScrollForWindow(e)},t.prototype.startScrollForContainer=function(t,e){this.config.scrollDirection&&"vertical"!==this.config.scrollDirection||this.startScrollVerticallyForContainer(t,e),this.config.scrollDirection&&"horizontal"!==this.config.scrollDirection||this.startScrollHorizontallyForContainer(t,e)},t.prototype.startScrollVerticallyForContainer=function(e,i){e.pageY-this.getOffset(i).top<this.config.scrollEdge?this.startAutoScrolling(i,-t.SCROLL_SPEED,"scrollTop"):this.getOffset(i).top+i.getBoundingClientRect().height-e.pageY<this.config.scrollEdge&&this.startAutoScrolling(i,t.SCROLL_SPEED,"scrollTop")},t.prototype.startScrollHorizontallyForContainer=function(e,i){e.pageX-i.getBoundingClientRect().left<this.config.scrollEdge?this.startAutoScrolling(i,-t.SCROLL_SPEED,"scrollLeft"):this.getOffset(i).left+i.getBoundingClientRect().width-e.pageX<this.config.scrollEdge&&this.startAutoScrolling(i,t.SCROLL_SPEED,"scrollLeft")},t.prototype.startScrollForWindow=function(t){this.config.scrollDirection&&"vertical"!==this.config.scrollDirection||this.startScrollVerticallyForWindow(t),this.config.scrollDirection&&"horizontal"!==this.config.scrollDirection||this.startScrollHorizontallyForWindow(t)},t.prototype.startScrollVerticallyForWindow=function(e){var i=document.scrollingElement||document.documentElement||document.body;e.pageY-window.pageYOffset<this.config.scrollEdge?this.startAutoScrolling(i,-t.SCROLL_SPEED,"scrollTop"):window.innerHeight-(e.pageY-window.pageYOffset)<this.config.scrollEdge&&this.startAutoScrolling(i,t.SCROLL_SPEED,"scrollTop")},t.prototype.startScrollHorizontallyForWindow=function(e){var i=document.scrollingElement||document.documentElement||document.body;e.pageX-window.pageXOffset<this.config.scrollEdge?this.startAutoScrolling(i,-t.SCROLL_SPEED,"scrollLeft"):window.innerWidth-(e.pageX-window.pageXOffset)<this.config.scrollEdge&&this.startAutoScrolling(i,t.SCROLL_SPEED,"scrollLeft")},t.prototype.getScrollContainer=function(t){var e=x(t);return t.scrollHeight>Math.ceil(e)?t:new RegExp("(body|html)","i").test(t.parentNode.tagName)?null:this.getScrollContainer(t.parentNode)},t.prototype.startAutoScrolling=function(t,e,i){return this.autoScrollingInterval.push(this.requestAnimationFrame(function(){this.startAutoScrolling(t,e,i)}.bind(this))),t[i]+=.25*e},t.prototype.getOffset=function(t){var e=t.getBoundingClientRect();return{left:e.left+this.getScroll("scrollLeft","pageXOffset"),top:e.top+this.getScroll("scrollTop","pageYOffset")}},t.prototype.getScroll=function(t,e){return void 0!==window[e]?window[e]:document.documentElement.clientHeight?document.documentElement[t]:document.body[t]},t.prototype.isDragingByHandler=function(t){return!!this.isValidDragHandler(t.target)&&(!this.config.handlerClass||this.config.handlerClass&&this.hasElementWithClass(this.config.handlerClass,t.target))},t.prototype.isValidDragHandler=function(t){return-1===["input","textarea"].indexOf(t.tagName.toLowerCase())},t.prototype.inRange=function(t,e,i){return Math.abs(e.clientX-t.clientX)>i||Math.abs(e.clientY-t.clientY)>i},t.prototype.hasElementWithClass=function(t,e){for(;e!==this.element;){if(e.classList.contains(t))return!0;e=e.parentElement}return!1},t.prototype.pauseEvent=function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},t.prototype.fixProblemWithDnDForIE=function(t){this.isTouchDevice()&&this.isIEorEdge()&&t.style&&(t.style["touch-action"]="none")},t.prototype.removeTouchActionNone=function(t){t.style&&(t.style["touch-action"]="")},t.prototype.addTouchActionNone=function(t){t.style&&(t.style["touch-action"]="none")},t.prototype.isTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints},t.prototype.isIEorEdge=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)},t.SCROLL_SPEED=20,t}(),H=function(){function t(t,i,n,o){this.zone=t,this.gridsterPrototypeService=i,this.xChange=new e.EventEmitter(!0),this.yChange=new e.EventEmitter(!0),this.xSmChange=new e.EventEmitter(!0),this.ySmChange=new e.EventEmitter(!0),this.xMdChange=new e.EventEmitter(!0),this.yMdChange=new e.EventEmitter(!0),this.xLgChange=new e.EventEmitter(!0),this.yLgChange=new e.EventEmitter(!0),this.xXlChange=new e.EventEmitter(!0),this.yXlChange=new e.EventEmitter(!0),this.wChange=new e.EventEmitter(!0),this.hChange=new e.EventEmitter(!0),this.wSmChange=new e.EventEmitter(!0),this.hSmChange=new e.EventEmitter(!0),this.wMdChange=new e.EventEmitter(!0),this.hMdChange=new e.EventEmitter(!0),this.wLgChange=new e.EventEmitter(!0),this.hLgChange=new e.EventEmitter(!0),this.wXlChange=new e.EventEmitter(!0),this.hXlChange=new e.EventEmitter(!0),this.change=new e.EventEmitter(!0),this.start=new e.EventEmitter(!0),this.end=new e.EventEmitter(!0),this.dragAndDrop=!0,this.resizable=!0,this.options={},this.isDragging=!1,this.isResizing=!1,this.defaultOptions={minWidth:1,minHeight:1,maxWidth:1/0,maxHeight:1/0,defaultWidth:1,defaultHeight:1},this.subscriptions=[],this.dragSubscriptions=[],this.resizeSubscriptions=[],this.gridster=o,this.elementRef=n,this.$element=n.nativeElement,this.item=(new z).setFromGridsterItem(this),this.gridster.isInitialized()&&this.preventAnimation()}return Object.defineProperty(t.prototype,"positionX",{get:function(){return this._positionX},set:function(t){this._positionX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionY",{get:function(){return this._positionY},set:function(t){this._positionY=t},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.options=Object.assign(this.defaultOptions,this.options),this.w=this.w||this.options.defaultWidth,this.h=this.h||this.options.defaultHeight,this.wSm=this.wSm||this.w,this.hSm=this.hSm||this.h,this.wMd=this.wMd||this.w,this.hMd=this.hMd||this.h,this.wLg=this.wLg||this.w,this.hLg=this.hLg||this.h,this.wXl=this.wXl||this.w,this.hXl=this.hXl||this.h,this.gridster.isInitialized()&&this.setPositionsOnItem(),this.gridster.registerItem(this.item),this.gridster.calculateCellSize(),this.item.applySize(),this.item.applyPosition(),this.gridster.options.dragAndDrop&&this.dragAndDrop&&this.enableDragDrop(),this.gridster.isInitialized()&&(this.gridster.render(),this.gridster.updateCachedItems())},t.prototype.ngAfterViewInit=function(){this.gridster.options.resizable&&this.item.resizable&&this.enableResizable()},t.prototype.ngOnChanges=function(t){var e=this;if(this.gridster.gridList){var i=!1;u(["w"],Object.keys(z.W_PROPERTY_MAP).map((function(t){return z.W_PROPERTY_MAP[t]}))).filter((function(e){return t[e]&&!t[e].isFirstChange()})).forEach((function(n){t[n].currentValue>e.options.maxWidth&&(e[n]=e.options.maxWidth,setTimeout((function(){return e[n+"Change"].emit(e[n])}))),i=!0})),u(["h"],Object.keys(z.H_PROPERTY_MAP).map((function(t){return z.H_PROPERTY_MAP[t]}))).filter((function(e){return t[e]&&!t[e].isFirstChange()})).forEach((function(n){t[n].currentValue>e.options.maxHeight&&(e[n]=e.options.maxHeight,setTimeout((function(){return e[n+"Change"].emit(e[n])}))),i=!0})),u(["x","y"],Object.keys(z.X_PROPERTY_MAP).map((function(t){return z.X_PROPERTY_MAP[t]})),Object.keys(z.Y_PROPERTY_MAP).map((function(t){return z.Y_PROPERTY_MAP[t]}))).filter((function(e){return t[e]&&!t[e].isFirstChange()})).forEach((function(t){return i=!0})),t.dragAndDrop&&!t.dragAndDrop.isFirstChange()&&(t.dragAndDrop.currentValue&&this.gridster.options.dragAndDrop?this.enableDragDrop():this.disableDraggable()),t.resizable&&!t.resizable.isFirstChange()&&(t.resizable.currentValue&&this.gridster.options.resizable?this.enableResizable():this.disableResizable()),i&&this.gridster.gridsterComponent.isReady&&this.gridster.debounceRenderSubject.next()}},t.prototype.ngOnDestroy=function(){this.gridster.removeItem(this.item),this.gridster.itemRemoveSubject.next(this.item),this.subscriptions.forEach((function(t){t.unsubscribe()})),this.disableDraggable(),this.disableResizable()},t.prototype.updateElemenetPosition=function(){this.gridster.options.useCSSTransforms?c(this.$element,{x:this._positionX,y:this._positionY}):g(this.$element,{x:this._positionX,y:this._positionY})},t.prototype.setPositionsOnItem=function(){var t=this;this.item.hasPositions(this.gridster.options.breakpoint)||this.setPositionsForGrid(this.gridster.options),this.gridster.gridsterOptions.responsiveOptions.filter((function(e){return!t.item.hasPositions(e.breakpoint)})).forEach((function(e){return t.setPositionsForGrid(e)}))},t.prototype.enableResizable=function(){var t=this;this.resizeSubscriptions.length||this.zone.runOutsideAngular((function(){t.getResizeHandlers().forEach((function(e){var i=t.getResizeDirection(e);t.hasResizableHandle(i)&&(e.style.display="block");var n,o,r,s=new L(e,t.getResizableOptions()),p=s.dragStart.subscribe((function(e){t.zone.run((function(){t.isResizing=!0,n=e,o=t.createResizeStartObject(i),r=e.getRelativeCoordinates(t.$element),t.gridster.onResizeStart(t.item),t.onStart("resize")}))})),a=s.dragMove.subscribe((function(e){var s=t.gridster.gridsterScrollData;t.resizeElement({direction:i,startData:o,position:{x:e.clientX-r.x-t.gridster.gridsterRect.left,y:e.clientY-r.y-t.gridster.gridsterRect.top},startEvent:n,moveEvent:e,scrollDiffX:s.scrollLeft-o.scrollLeft,scrollDiffY:s.scrollTop-o.scrollTop}),t.gridster.onResizeDrag(t.item)})),h=s.dragStop.subscribe((function(){t.zone.run((function(){t.isResizing=!1,t.gridster.onResizeStop(t.item),t.onEnd("resize")}))}));t.resizeSubscriptions=t.resizeSubscriptions.concat([p,a,h])}))}))},t.prototype.disableResizable=function(){this.resizeSubscriptions.forEach((function(t){t.unsubscribe()})),this.resizeSubscriptions=[],[].forEach.call(this.$element.querySelectorAll(".gridster-item-resizable-handler"),(function(t){t.style.display=""}))},t.prototype.enableDragDrop=function(){var t=this;this.dragSubscriptions.length||this.zone.runOutsideAngular((function(){var e,i=new L(t.$element,t.getDraggableOptions()),n=i.dragStart.subscribe((function(i){t.zone.run((function(){t.gridster.onStart(t.item),t.isDragging=!0,t.onStart("drag"),e=i.getRelativeCoordinates(t.$element)}))})),o=i.dragMove.subscribe((function(i){t.positionY=i.clientY-e.y-t.gridster.gridsterRect.top,t.positionX=i.clientX-e.x-t.gridster.gridsterRect.left,t.updateElemenetPosition(),t.gridster.onDrag(t.item)})),r=i.dragStop.subscribe((function(){t.zone.run((function(){t.gridster.onStop(t.item),t.gridster.debounceRenderSubject.next(),t.isDragging=!1,t.onEnd("drag")}))}));t.dragSubscriptions=t.dragSubscriptions.concat([n,o,r])}))},t.prototype.disableDraggable=function(){this.dragSubscriptions.forEach((function(t){t.unsubscribe()})),this.dragSubscriptions=[]},t.prototype.getResizeHandlers=function(){return[].filter.call(this.$element.children[0].children,(function(t){return t.classList.contains("gridster-item-resizable-handler")}))},t.prototype.getDraggableOptions=function(){return r({scrollDirection:this.gridster.options.direction},this.gridster.draggableOptions)},t.prototype.getResizableOptions=function(){var t={};return(this.gridster.draggableOptions.scroll||!1===this.gridster.draggableOptions.scroll)&&(t.scroll=this.gridster.draggableOptions.scroll),this.gridster.draggableOptions.scrollEdge&&(t.scrollEdge=this.gridster.draggableOptions.scrollEdge),t.scrollDirection=this.gridster.options.direction,t},t.prototype.hasResizableHandle=function(t){var e=this.gridster.options.resizable&&this.item.resizable,i=this.gridster.options.resizeHandles;return e&&(!i||i&&!!i[t])},t.prototype.setPositionsForGrid=function(t){var e,i,n=this,o=this.findPosition(t);e="horizontal"===t.direction?o[0]:o[1],i="horizontal"===t.direction?o[1]:o[0],this.item.setValueX(e,t.breakpoint),this.item.setValueY(i,t.breakpoint),setTimeout((function(){n.item.triggerChangeX(t.breakpoint),n.item.triggerChangeY(t.breakpoint)}))},t.prototype.findPosition=function(t){return new P(this.gridster.items.map((function(e){return e.copyForBreakpoint(t.breakpoint)})),t).findPositionForItem(this.item,{x:0,y:0})},t.prototype.createResizeStartObject=function(t){var e=this.gridster.gridsterScrollData;return{top:this.positionY,left:this.positionX,height:parseInt(this.$element.style.height,10),width:parseInt(this.$element.style.width,10),minX:Math.max(this.item.x+this.item.w-this.options.maxWidth,0),maxX:this.item.x+this.item.w-this.options.minWidth,minY:Math.max(this.item.y+this.item.h-this.options.maxHeight,0),maxY:this.item.y+this.item.h-this.options.minHeight,minW:this.options.minWidth,maxW:Math.min(this.options.maxWidth,"vertical"===this.gridster.options.direction&&t.indexOf("w")<0?this.gridster.options.lanes-this.item.x:this.options.maxWidth,t.indexOf("w")>=0?this.item.x+this.item.w:this.options.maxWidth),minH:this.options.minHeight,maxH:Math.min(this.options.maxHeight,"horizontal"===this.gridster.options.direction&&t.indexOf("n")<0?this.gridster.options.lanes-this.item.y:this.options.maxHeight,t.indexOf("n")>=0?this.item.y+this.item.h:this.options.maxHeight),scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}},t.prototype.onEnd=function(t){this.end.emit({action:t,item:this.item})},t.prototype.onStart=function(t){this.start.emit({action:t,item:this.item})},t.prototype.preventAnimation=function(){var t=this;return this.$element.classList.add("no-transition"),setTimeout((function(){t.$element.classList.remove("no-transition")}),500),this},t.prototype.getResizeDirection=function(t){for(var e=t.classList.length-1;e>=0;e--)if(t.classList[e].match("handle-"))return t.classList[e].split("-")[1]},t.prototype.resizeElement=function(t){t.direction.indexOf("n")>=0&&this.resizeToNorth(t),t.direction.indexOf("w")>=0&&this.resizeToWest(t),t.direction.indexOf("e")>=0&&this.resizeToEast(t),t.direction.indexOf("s")>=0&&this.resizeToSouth(t)},t.prototype.resizeToNorth=function(t){var e=t.startData.height+t.startEvent.clientY-t.moveEvent.clientY-t.scrollDiffY;e<t.startData.minH*this.gridster.cellHeight?this.setMinHeight("n",t):e>t.startData.maxH*this.gridster.cellHeight?this.setMaxHeight("n",t):(this.positionY=t.position.y,this.$element.style.height=e+"px")},t.prototype.resizeToWest=function(t){var e=t.startData.width+t.startEvent.clientX-t.moveEvent.clientX-t.scrollDiffX;e<t.startData.minW*this.gridster.cellWidth?this.setMinWidth("w",t):e>t.startData.maxW*this.gridster.cellWidth?this.setMaxWidth("w",t):(this.positionX=t.position.x,this.updateElemenetPosition(),this.$element.style.width=e+"px")},t.prototype.resizeToEast=function(t){var e=t.startData.width+t.moveEvent.clientX-t.startEvent.clientX+t.scrollDiffX;e>t.startData.maxW*this.gridster.cellWidth?this.setMaxWidth("e",t):e<t.startData.minW*this.gridster.cellWidth?this.setMinWidth("e",t):this.$element.style.width=e+"px"},t.prototype.resizeToSouth=function(t){var e=t.startData.height+t.moveEvent.clientY-t.startEvent.clientY+t.scrollDiffY;e>t.startData.maxH*this.gridster.cellHeight?this.setMaxHeight("s",t):e<t.startData.minH*this.gridster.cellHeight?this.setMinHeight("s",t):this.$element.style.height=e+"px"},t.prototype.setMinHeight=function(t,e){"n"===t?(this.$element.style.height=e.startData.minH*this.gridster.cellHeight+"px",this.positionY=e.startData.maxY*this.gridster.cellHeight):this.$element.style.height=e.startData.minH*this.gridster.cellHeight+"px"},t.prototype.setMinWidth=function(t,e){"w"===t?(this.$element.style.width=e.startData.minW*this.gridster.cellWidth+"px",this.positionX=e.startData.maxX*this.gridster.cellWidth,this.updateElemenetPosition()):this.$element.style.width=e.startData.minW*this.gridster.cellWidth+"px"},t.prototype.setMaxHeight=function(t,e){"n"===t?(this.$element.style.height=e.startData.maxH*this.gridster.cellHeight+"px",this.positionY=e.startData.minY*this.gridster.cellHeight):this.$element.style.height=e.startData.maxH*this.gridster.cellHeight+"px"},t.prototype.setMaxWidth=function(t,e){"w"===t?(this.$element.style.width=e.startData.maxW*this.gridster.cellWidth+"px",this.positionX=e.startData.minX*this.gridster.cellWidth,this.updateElemenetPosition()):this.$element.style.width=e.startData.maxW*this.gridster.cellWidth+"px"},t.ctorParameters=function(){return[{type:e.NgZone},{type:S},{type:e.ElementRef,decorators:[{type:e.Inject,args:[e.ElementRef]}]},{type:I,decorators:[{type:e.Inject,args:[I]}]}]},s([e.Input(),a("design:type",Number)],t.prototype,"x",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"xChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"y",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"yChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"xSm",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"xSmChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"ySm",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"ySmChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"xMd",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"xMdChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"yMd",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"yMdChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"xLg",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"xLgChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"yLg",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"yLgChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"xXl",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"xXlChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"yXl",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"yXlChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"w",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"wChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"h",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"hChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wSm",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"wSmChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hSm",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"hSmChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wMd",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"wMdChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hMd",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"hMdChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wLg",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"wLgChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hLg",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"hLgChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wXl",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"wXlChange",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hXl",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"hXlChange",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"change",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"start",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"end",void 0),s([e.Input(),a("design:type",Object)],t.prototype,"dragAndDrop",void 0),s([e.Input(),a("design:type",Object)],t.prototype,"resizable",void 0),s([e.Input(),a("design:type",Object)],t.prototype,"options",void 0),s([e.HostBinding("class.is-dragging"),a("design:type",Object)],t.prototype,"isDragging",void 0),s([e.HostBinding("class.is-resizing"),a("design:type",Object)],t.prototype,"isResizing",void 0),t=s([e.Component({selector:"ngx-gridster-item",template:'<div class="gridster-item-inner">\n      <ng-content></ng-content>\n      <div class="gridster-item-resizable-handler handle-s"></div>\n      <div class="gridster-item-resizable-handler handle-e"></div>\n      <div class="gridster-item-resizable-handler handle-n"></div>\n      <div class="gridster-item-resizable-handler handle-w"></div>\n      <div class="gridster-item-resizable-handler handle-se"></div>\n      <div class="gridster-item-resizable-handler handle-ne"></div>\n      <div class="gridster-item-resizable-handler handle-sw"></div>\n      <div class="gridster-item-resizable-handler handle-nw"></div>\n    </div>',changeDetection:e.ChangeDetectionStrategy.OnPush,encapsulation:e.ViewEncapsulation.None,styles:["\n    ngx-gridster-item {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: 1;\n        -webkit-transition: none;\n        transition: none;\n    }\n\n    .gridster--ready ngx-gridster-item {\n        transition: all 200ms ease;\n        transition-property: left, top;\n    }\n\n    .gridster--ready.css-transform ngx-gridster-item  {\n        transition-property: transform;\n    }\n\n    .gridster--ready ngx-gridster-item.is-dragging,\n    .gridster--ready ngx-gridster-item.is-resizing {\n        -webkit-transition: none;\n        transition: none;\n        z-index: 9999;\n    }\n\n    ngx-gridster-item.no-transition {\n        -webkit-transition: none;\n        transition: none;\n    }\n    ngx-gridster-item .gridster-item-resizable-handler {\n        position: absolute;\n        z-index: 2;\n        display: none;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-n {\n      cursor: n-resize;\n      height: 10px;\n      right: 0;\n      top: 0;\n      left: 0;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-e {\n      cursor: e-resize;\n      width: 10px;\n      bottom: 0;\n      right: 0;\n      top: 0;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-s {\n      cursor: s-resize;\n      height: 10px;\n      right: 0;\n      bottom: 0;\n      left: 0;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-w {\n      cursor: w-resize;\n      width: 10px;\n      left: 0;\n      top: 0;\n      bottom: 0;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-ne {\n      cursor: ne-resize;\n      width: 10px;\n      height: 10px;\n      right: 0;\n      top: 0;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-nw {\n      cursor: nw-resize;\n      width: 10px;\n      height: 10px;\n      left: 0;\n      top: 0;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-se {\n      cursor: se-resize;\n      width: 0;\n      height: 0;\n      right: 0;\n      bottom: 0;\n      border-style: solid;\n      border-width: 0 0 10px 10px;\n      border-color: transparent;\n    }\n\n    ngx-gridster-item .gridster-item-resizable-handler.handle-sw {\n      cursor: sw-resize;\n      width: 10px;\n      height: 10px;\n      left: 0;\n      bottom: 0;\n    }\n\n    ngx-gridster-item:hover .gridster-item-resizable-handler.handle-se {\n      border-color: transparent transparent #ccc\n    }\n    "]}),p(2,e.Inject(e.ElementRef)),p(3,e.Inject(I)),a("design:paramtypes",[e.NgZone,S,e.ElementRef,I])],t)}(),T=function(){function t(t,i,n){this.zone=t,this.elementRef=i,this.gridsterPrototype=n,this.drop=new e.EventEmitter,this.start=new e.EventEmitter,this.cancel=new e.EventEmitter,this.enter=new e.EventEmitter,this.out=new e.EventEmitter,this.config={},this.x=0,this.y=0,this.autoSize=!1,this.isDragging=!1,this.subscribtions=[],this.item=(new z).setFromGridsterItemPrototype(this)}return Object.defineProperty(t.prototype,"dragAndDrop",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridster",{get:function(){return this.dragContextGridster},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.wSm=this.wSm||this.w,this.hSm=this.hSm||this.h,this.wMd=this.wMd||this.w,this.hMd=this.hMd||this.h,this.wLg=this.wLg||this.w,this.hLg=this.hLg||this.h,this.wXl=this.wXl||this.w,this.hXl=this.hXl||this.h,this.zone.runOutsideAngular((function(){t.enableDragDrop()}))},t.prototype.ngOnDestroy=function(){this.subscribtions.forEach((function(t){t.unsubscribe()}))},t.prototype.onDrop=function(t){this.config.helper||this.$element.parentNode.removeChild(this.$element),this.drop.emit({item:this.item,gridster:t})},t.prototype.onCancel=function(){this.cancel.emit({item:this.item})},t.prototype.onEnter=function(t){this.enter.emit({item:this.item,gridster:t})},t.prototype.onOver=function(t){},t.prototype.onOut=function(t){this.out.emit({item:this.item,gridster:t})},t.prototype.getPositionToGridster=function(t){var e=this.getContainerCoordsToGridster(t);return{y:this.positionY-e.top,x:this.positionX-e.left}},t.prototype.setDragContextGridster=function(t){this.dragContextGridster=t},t.prototype.getContainerCoordsToGridster=function(t){return{left:t.gridsterRect.left-this.parentRect.left,top:t.gridsterRect.top-this.parentRect.top}},t.prototype.enableDragDrop=function(){var t,e=this,i=new L(this.elementRef.nativeElement),o=i.dragStart.subscribe((function(i){e.zone.run((function(){e.$element=e.provideDragElement(),e.containerRectange=e.$element.parentElement.getBoundingClientRect(),e.updateParentElementData(),e.onStart(i),t=i.getRelativeCoordinates(e.$element)}))})),r=i.dragMove.subscribe((function(i){e.setElementPosition(e.$element,{x:i.clientX-t.x-e.parentRect.left,y:i.clientY-t.y-e.parentRect.top}),e.onDrag(i)})),s=i.dragStop.subscribe((function(t){e.zone.run((function(){e.onStop(t),e.$element=null}))})),p=n.fromEvent(document,"scroll").subscribe((function(){e.$element&&e.updateParentElementData()}));this.subscribtions=this.subscribtions.concat([o,r,s,p])},t.prototype.setElementPosition=function(t,e){this.positionX=e.x,this.positionY=e.y,g(t,e)},t.prototype.updateParentElementData=function(){this.parentRect=this.$element.parentElement.getBoundingClientRect(),this.parentOffset={left:this.$element.parentElement.offsetLeft,top:this.$element.parentElement.offsetTop}},t.prototype.onStart=function(t){this.isDragging=!0,this.$element.style.pointerEvents="none",this.$element.style.position="absolute",this.gridsterPrototype.dragItemStart(this,t),this.start.emit({item:this.item})},t.prototype.onDrag=function(t){this.gridsterPrototype.updatePrototypePosition(this,t)},t.prototype.onStop=function(t){this.gridsterPrototype.dragItemStop(this,t),this.isDragging=!1,this.$element.style.pointerEvents="auto",this.$element.style.position="",d(this.$element),this.config.helper&&this.$element.parentNode.removeChild(this.$element)},t.prototype.provideDragElement=function(){var t=this.elementRef.nativeElement;return this.config.helper?(t=t.cloneNode(!0),document.body.appendChild(this.fixStylesForBodyHelper(t))):this.fixStylesForRelativeElement(t),t},t.prototype.fixStylesForRelativeElement=function(t){if("absolute"===window.getComputedStyle(t).position)return t;var e=this.elementRef.nativeElement.getBoundingClientRect();return this.containerRectange=t.parentElement.getBoundingClientRect(),t.style.position="absolute",this.setElementPosition(t,{x:e.left-this.containerRectange.left,y:e.top-this.containerRectange.top}),t},t.prototype.fixStylesForBodyHelper=function(t){var e=document.body.getBoundingClientRect(),i=this.elementRef.nativeElement.getBoundingClientRect();return t.style.position="absolute",this.setElementPosition(t,{x:i.left-e.left,y:i.top-e.top}),t},t.ctorParameters=function(){return[{type:e.NgZone},{type:e.ElementRef},{type:S}]},s([e.Output(),a("design:type",Object)],t.prototype,"drop",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"start",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"cancel",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"enter",void 0),s([e.Output(),a("design:type",Object)],t.prototype,"out",void 0),s([e.Input(),a("design:type",Object)],t.prototype,"data",void 0),s([e.Input(),a("design:type",Object)],t.prototype,"config",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"w",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wSm",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wMd",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wLg",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"wXl",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"h",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hSm",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hMd",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hLg",void 0),s([e.Input(),a("design:type",Number)],t.prototype,"hXl",void 0),t=s([e.Directive({selector:"[ngxGridsterItemPrototype]"}),a("design:paramtypes",[e.NgZone,e.ElementRef,S])],t)}(),j=function(){function t(){}var n;return n=t,t.forRoot=function(){return{ngModule:n,providers:[S]}},t=n=s([e.NgModule({imports:[i.CommonModule],declarations:[D,H,T],exports:[D,H,T]})],t)}();t.GridListItem=z,t.GridsterComponent=D,t.GridsterItemComponent=H,t.GridsterItemPrototypeDirective=T,t.GridsterModule=j,t.GridsterOptions=C,t.GridsterPrototypeService=S,t.GridsterService=I,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular2gridster.umd.min.js.map