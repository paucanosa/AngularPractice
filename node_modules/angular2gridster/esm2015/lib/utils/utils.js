const ɵ0 = function ($element, position) {
    $element.style.left = position.x + 'px';
    $element.style.top = position.y + 'px';
}, ɵ1 = function ($element) {
    $element.style.left = '';
    $element.style.top = '';
}, ɵ2 = function ($element, position) {
    const left = position.x;
    const top = position.y;
    // Replace unitless items with px
    const translate = `translate(${left}px,${top}px)`;
    $element.style['transform'] = translate;
    $element.style['WebkitTransform'] = translate;
    $element.style['MozTransform'] = translate;
    $element.style['msTransform'] = translate;
    $element.style['OTransform'] = translate;
}, ɵ3 = function ($element) {
    $element.style['transform'] = '';
    $element.style['WebkitTransform'] = '';
    $element.style['MozTransform'] = '';
    $element.style['msTransform'] = '';
    $element.style['OTransform'] = '';
}, ɵ4 = () => {
    if (document['selection']) {
        document['selection'].empty();
    }
    else if (window.getSelection) {
        window.getSelection().removeAllRanges();
    }
}, ɵ5 = function (element, containerEl) {
    const containerRect = containerEl.getBoundingClientRect();
    const elRect = element.getBoundingClientRect();
    return elRect.left > containerRect.left &&
        elRect.right < containerRect.right &&
        elRect.top > containerRect.top &&
        elRect.bottom < containerRect.bottom;
}, ɵ6 = function (element, containerEl) {
    const containerRect = containerEl.getBoundingClientRect();
    const elRect = element.getBoundingClientRect();
    const elWidth = elRect.right - elRect.left;
    const elHeight = elRect.bottom - elRect.top;
    return (elRect.left + (elWidth / 2)) > containerRect.left &&
        (elRect.right - (elWidth / 2)) < containerRect.right &&
        (elRect.top + (elHeight / 2)) > containerRect.top &&
        (elRect.bottom - (elHeight / 2)) < containerRect.bottom;
}, ɵ7 = function (element, containerEl) {
    const containerRect = containerEl.getBoundingClientRect();
    const elRect = element.getBoundingClientRect();
    return elRect.right > containerRect.left &&
        elRect.bottom > containerRect.top &&
        elRect.left < containerRect.right &&
        elRect.top < containerRect.bottom;
}, ɵ8 = function (event, element) {
    const elRect = element.getBoundingClientRect();
    return event.pageX > elRect.left &&
        event.pageX < elRect.right &&
        event.pageY > elRect.top &&
        event.pageY < elRect.bottom;
}, ɵ9 = function ($element) {
    const styleObj = window.getComputedStyle($element);
    // NOTE: Manually calculating height because IE's `clientHeight` isn't always
    // reliable.
    return parseFloat(styleObj.getPropertyValue('height')) +
        parseFloat(styleObj.getPropertyValue('padding-top')) +
        parseFloat(styleObj.getPropertyValue('padding-bottom'));
}, ɵ10 = (element, parentElement) => {
    const parentElementRect = parentElement.getBoundingClientRect();
    const elementRect = element.getBoundingClientRect();
    return {
        top: elementRect.top - parentElementRect.top,
        left: elementRect.left - parentElementRect.left
    };
};
export const utils = {
    setCssElementPosition: ɵ0,
    resetCSSElementPosition: ɵ1,
    setTransform: ɵ2,
    resetTransform: ɵ3,
    clearSelection: ɵ4,
    isElementFitContainer: ɵ5,
    isElementIntersectContainer: ɵ6,
    isElementTouchContainer: ɵ7,
    isCursorAboveElement: ɵ8,
    getElementOuterHeight: ɵ9,
    getRelativeCoordinates: ɵ10,
    getScrollableContainer(node) {
        const regex = /(auto|scroll)/;
        const parents = (_node, ps) => {
            if (_node.parentNode === null) {
                return ps;
            }
            return parents(_node.parentNode, ps.concat([_node]));
        };
        const style = (_node, prop) => {
            return getComputedStyle(_node, null).getPropertyValue(prop);
        };
        const overflow = _node => {
            return (style(_node, 'overflow') + style(_node, 'overflow-y') + style(_node, 'overflow-x'));
        };
        const scroll = _node => regex.test(overflow(_node));
        /* eslint-disable consistent-return */
        const scrollParent = _node => {
            if (!(_node instanceof HTMLElement || _node instanceof SVGElement)) {
                return;
            }
            const ps = parents(_node.parentNode, []);
            for (let i = 0; i < ps.length; i += 1) {
                if (scroll(ps[i])) {
                    return ps[i];
                }
            }
            return document.scrollingElement || document.documentElement;
        };
        return scrollParent(node);
    }
};
export { ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6, ɵ7, ɵ8, ɵ9, ɵ10 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyMmdyaWRzdGVyLyIsInNvdXJjZXMiOlsibGliL3V0aWxzL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJXQUkyQixVQUFVLFFBQXFCLEVBQUUsUUFBZ0M7SUFDcEYsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDeEMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0MsQ0FBQyxPQUN3QixVQUFVLFFBQXFCO0lBQ3BELFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUN6QixRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7QUFDNUIsQ0FBQyxPQUNhLFVBQVUsUUFBcUIsRUFBRSxRQUFnQztJQUMzRSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFFdkIsaUNBQWlDO0lBQ2pDLE1BQU0sU0FBUyxHQUFHLGFBQWEsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDO0lBRWxELFFBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsU0FBUyxDQUFDO0lBQ3hDLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsR0FBRyxTQUFTLENBQUM7SUFDOUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsR0FBRyxTQUFTLENBQUM7SUFDM0MsUUFBUSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsR0FBRyxTQUFTLENBQUM7SUFDMUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsR0FBRyxTQUFTLENBQUM7QUFDN0MsQ0FBQyxPQUNlLFVBQVUsUUFBcUI7SUFDM0MsUUFBUSxDQUFDLEtBQUssQ0FBQyxX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QyxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDbkMsSUFBSSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQ2YsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ2hCO2FBQ0o7WUFFRCxPQUFPLFFBQVEsQ0FBQyxnQkFBZ0IsSUFBSSxRQUFRLENBQUMsZUFBZSxDQUFDO1FBQ2pFLENBQUMsQ0FBQztRQUVGLE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlCLENBQUM7Q0FDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBEcmFnZ2FibGVFdmVudCB9IGZyb20gJy4vRHJhZ2dhYmxlRXZlbnQnO1xuXG5leHBvcnQgY29uc3QgdXRpbHMgPSB7XG4gICAgc2V0Q3NzRWxlbWVudFBvc2l0aW9uOiBmdW5jdGlvbiAoJGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwb3NpdGlvbjoge3g6IG51bWJlciwgeTogbnVtYmVyfSkge1xuICAgICAgICAkZWxlbWVudC5zdHlsZS5sZWZ0ID0gcG9zaXRpb24ueCArICdweCc7XG4gICAgICAgICRlbGVtZW50LnN0eWxlLnRvcCA9IHBvc2l0aW9uLnkgKyAncHgnO1xuICAgIH0sXG4gICAgcmVzZXRDU1NFbGVtZW50UG9zaXRpb246IGZ1bmN0aW9uICgkZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgJGVsZW1lbnQuc3R5bGUubGVmdCA9ICcnO1xuICAgICAgICAkZWxlbWVudC5zdHlsZS50b3AgPSAnJztcbiAgICB9LFxuICAgIHNldFRyYW5zZm9ybTogZnVuY3Rpb24gKCRlbGVtZW50OiBIVE1MRWxlbWVudCwgcG9zaXRpb246IHt4OiBudW1iZXIsIHk6IG51bWJlcn0pIHtcbiAgICAgICAgY29uc3QgbGVmdCA9IHBvc2l0aW9uLng7XG4gICAgICAgIGNvbnN0IHRvcCA9IHBvc2l0aW9uLnk7XG5cbiAgICAgICAgLy8gUmVwbGFjZSB1bml0bGVzcyBpdGVtcyB3aXRoIHB4XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9IGB0cmFuc2xhdGUoJHtsZWZ0fXB4LCR7dG9wfXB4KWA7XG5cbiAgICAgICAgJGVsZW1lbnQuc3R5bGVbJ3RyYW5zZm9ybSddID0gdHJhbnNsYXRlO1xuICAgICAgICAkZWxlbWVudC5zdHlsZVsnV2Via2l0VHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgICAgICRlbGVtZW50LnN0eWxlWydNb3pUcmFuc2Zvcm0nXSA9IHRyYW5zbGF0ZTtcbiAgICAgICAgJGVsZW1lbnQuc3R5bGVbJ21zVHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgICAgICRlbGVtZW50LnN0eWxlWydPVHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgfSxcbiAgICByZXNldFRyYW5zZm9ybTogZnVuY3Rpb24gKCRlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICAkZWxlbWVudC5zdHlsZVsndHJhbnNmb3JtJ10gPSAnJztcbiAgICAgICAgJGVsZW1lbnQuc3R5bGVbJ1dlYmtpdFRyYW5zZm9ybSddID0gJyc7XG4gICAgICAgICRlbGVtZW50LnN0eWxlWydNb3pUcmFuc2Zvcm0nXSA9ICcnO1xuICAgICAgICAkZWxlbWVudC5zdHlsZVsnbXNUcmFuc2Zvcm0nXSA9ICcnO1xuICAgICAgICAkZWxlbWVudC5zdHlsZVsnT1RyYW5zZm9ybSddID0gJyc7XG4gICAgfSxcbiAgICBjbGVhclNlbGVjdGlvbjogKCkgPT4ge1xuICAgICAgICBpZiAoZG9jdW1lbnRbJ3NlbGVjdGlvbiddKSB7XG4gICAgICAgICAgICBkb2N1bWVudFsnc2VsZWN0aW9uJ10uZW1wdHkoKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlzRWxlbWVudEZpdENvbnRhaW5lcjogZnVuY3Rpb24gKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBlbFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHJldHVybiBlbFJlY3QubGVmdCA+IGNvbnRhaW5lclJlY3QubGVmdCAmJlxuICAgICAgICAgICAgZWxSZWN0LnJpZ2h0IDwgY29udGFpbmVyUmVjdC5yaWdodCAmJlxuICAgICAgICAgICAgZWxSZWN0LnRvcCA+IGNvbnRhaW5lclJlY3QudG9wICYmXG4gICAgICAgICAgICBlbFJlY3QuYm90dG9tIDwgY29udGFpbmVyUmVjdC5ib3R0b207XG4gICAgfSxcbiAgICBpc0VsZW1lbnRJbnRlcnNlY3RDb250YWluZXI6IGZ1bmN0aW9uIChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgZWxSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICBjb25zdCBlbFdpZHRoID0gZWxSZWN0LnJpZ2h0IC0gZWxSZWN0LmxlZnQ7XG4gICAgICAgIGNvbnN0IGVsSGVpZ2h0ID0gZWxSZWN0LmJvdHRvbSAtIGVsUmVjdC50b3A7XG5cbiAgICAgICAgcmV0dXJuIChlbFJlY3QubGVmdCArIChlbFdpZHRoIC8gMikpID4gY29udGFpbmVyUmVjdC5sZWZ0ICYmXG4gICAgICAgICAgICAoZWxSZWN0LnJpZ2h0IC0gKGVsV2lkdGggLyAyKSkgPCBjb250YWluZXJSZWN0LnJpZ2h0ICYmXG4gICAgICAgICAgICAoZWxSZWN0LnRvcCArIChlbEhlaWdodCAvIDIpKSA+IGNvbnRhaW5lclJlY3QudG9wICYmXG4gICAgICAgICAgICAoZWxSZWN0LmJvdHRvbSAtIChlbEhlaWdodCAvIDIpKSA8IGNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgIH0sXG4gICAgaXNFbGVtZW50VG91Y2hDb250YWluZXI6IGZ1bmN0aW9uIChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgZWxSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICByZXR1cm4gZWxSZWN0LnJpZ2h0ID4gY29udGFpbmVyUmVjdC5sZWZ0ICYmXG4gICAgICAgICAgICBlbFJlY3QuYm90dG9tID4gY29udGFpbmVyUmVjdC50b3AgJiZcbiAgICAgICAgICAgIGVsUmVjdC5sZWZ0IDwgY29udGFpbmVyUmVjdC5yaWdodCAmJlxuICAgICAgICAgICAgZWxSZWN0LnRvcCA8IGNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgIH0sXG4gICAgaXNDdXJzb3JBYm92ZUVsZW1lbnQ6IGZ1bmN0aW9uIChldmVudDogRHJhZ2dhYmxlRXZlbnQsIGVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZWxSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICByZXR1cm4gZXZlbnQucGFnZVggPiBlbFJlY3QubGVmdCAmJlxuICAgICAgICAgICAgZXZlbnQucGFnZVggPCBlbFJlY3QucmlnaHQgJiZcbiAgICAgICAgICAgIGV2ZW50LnBhZ2VZID4gZWxSZWN0LnRvcCAmJlxuICAgICAgICAgICAgZXZlbnQucGFnZVkgPCBlbFJlY3QuYm90dG9tO1xuICAgIH0sXG4gICAgZ2V0RWxlbWVudE91dGVySGVpZ2h0OiBmdW5jdGlvbiAoJGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHN0eWxlT2JqID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoJGVsZW1lbnQpO1xuICAgICAgICAvLyBOT1RFOiBNYW51YWxseSBjYWxjdWxhdGluZyBoZWlnaHQgYmVjYXVzZSBJRSdzIGBjbGllbnRIZWlnaHRgIGlzbid0IGFsd2F5c1xuICAgICAgICAvLyByZWxpYWJsZS5cbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3R5bGVPYmouZ2V0UHJvcGVydHlWYWx1ZSgnaGVpZ2h0JykpICtcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoc3R5bGVPYmouZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSkgK1xuICAgICAgICAgICAgcGFyc2VGbG9hdChzdHlsZU9iai5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKTtcbiAgICB9LFxuICAgIGdldFJlbGF0aXZlQ29vcmRpbmF0ZXM6IChlbGVtZW50LCBwYXJlbnRFbGVtZW50KToge3RvcDogbnVtYmVyLCBsZWZ0OiBudW1iZXJ9ID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudFJlY3QgPSBwYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcDogZWxlbWVudFJlY3QudG9wIC0gcGFyZW50RWxlbWVudFJlY3QudG9wLFxuICAgICAgICAgICAgbGVmdDogZWxlbWVudFJlY3QubGVmdCAtIHBhcmVudEVsZW1lbnRSZWN0LmxlZnRcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldFNjcm9sbGFibGVDb250YWluZXIobm9kZSkge1xuICAgICAgICBjb25zdCByZWdleCA9IC8oYXV0b3xzY3JvbGwpLztcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IChfbm9kZSwgcHMpID0+IHtcbiAgICAgICAgICAgIGlmIChfbm9kZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudHMoX25vZGUucGFyZW50Tm9kZSwgcHMuY29uY2F0KFtfbm9kZV0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdHlsZSA9IChfbm9kZSwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUoX25vZGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG92ZXJmbG93ID0gX25vZGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBzdHlsZShfbm9kZSwgJ292ZXJmbG93JykgKyBzdHlsZShfbm9kZSwgJ292ZXJmbG93LXknKSArIHN0eWxlKF9ub2RlLCAnb3ZlcmZsb3cteCcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzY3JvbGwgPSBfbm9kZSA9PiByZWdleC50ZXN0KG92ZXJmbG93KF9ub2RlKSk7XG5cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbiAgICAgICAgY29uc3Qgc2Nyb2xsUGFyZW50ID0gX25vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKCEoX25vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBfbm9kZSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcyA9IHBhcmVudHMoX25vZGUucGFyZW50Tm9kZSwgW10pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbChwc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzY3JvbGxQYXJlbnQobm9kZSk7XG4gICAgfVxufTtcbiJdfQ==